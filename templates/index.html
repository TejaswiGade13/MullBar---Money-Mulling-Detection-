<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MullBar ‚Äî Money Muling Risk Intelligence</title>
    <meta name="description" content="Graph-powered fraud detection platform for identifying money mule networks">
    <link rel="stylesheet" href="/static/css/style.css">
    <!-- Tailwind CDN for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>
</head>

<body>
    <div id="app" class="min-h-screen flex flex-col w-full transition-colors duration-300"
        style="background: var(--color-primary-bg);">

        <!-- Header -->
        <header
            class="flex items-center justify-between px-4 sm:px-6 md:px-8 py-3 sm:py-4 border-b w-full shrink-0 z-50 sticky top-0 transition-colors duration-300"
            style="border-color: var(--color-border); background: var(--color-card-bg);">
            <div class="flex items-center gap-2 sm:gap-3 cursor-pointer select-none" id="logo-btn">
                <div class="w-8 h-8 sm:w-9 sm:h-9 rounded-lg flex items-center justify-center font-bold text-xs sm:text-sm shadow-sm transition-colors duration-300"
                    style="background: var(--color-accent-green); color: #FFFFFF;">M</div>
                <h1 class="text-lg sm:text-xl font-bold tracking-tight transition-colors duration-300"
                    style="color: var(--color-text-main);">MulBar</h1>
            </div>
            <div class="flex items-center gap-3">
                <button id="theme-toggle"
                    class="w-8 h-8 sm:w-9 sm:h-9 rounded-full flex items-center justify-center transition-colors duration-200 hover:bg-black/5 dark:hover:bg-white/10"
                    title="Toggle Theme">
                    <span class="text-lg" id="theme-icon">üåô</span>
                </button>
                <button id="new-analysis-btn"
                    class="btn-hover px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm font-medium text-white shadow-sm transition-all duration-300 hidden"
                    style="background: var(--color-accent-pink);">‚Üê New Analysis</button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-1 w-full max-w-7xl mx-auto px-3 sm:px-4 md:px-6 py-4 sm:py-6 md:py-8 flex flex-col">

            <!-- LANDING STATE -->
            <div id="state-landing" class="fade-in w-full flex-1 flex flex-col justify-center">
                <!-- Landing Hero -->
                <div class="text-center py-8 sm:py-12 md:py-16 px-2 slide-up">
                    <div class="inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-full text-xs font-semibold mb-4 sm:mb-6"
                        style="background: rgba(132,147,74,0.12); color: var(--color-olive);">
                        <span class="w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full animate-pulse"
                            style="background: var(--color-accent-green);"></span>
                        Graph-Powered Fraud Intelligence
                    </div>
                    <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold tracking-tight mb-3 sm:mb-4"
                        style="color: var(--color-deep-brown);">
                        Detect Money Muling<br>
                        <span style="color: var(--color-accent-green);">Networks in Seconds</span>
                    </h1>
                    <p class="text-sm sm:text-base md:text-lg max-w-2xl mx-auto mb-2 px-2"
                        style="color: var(--color-muted);">
                        Upload transaction data. MulBar builds a transaction graph, detects fraud rings,
                        smurfing patterns, and shell networks ‚Äî with full explainability.
                    </p>
                    <div class="flex flex-wrap items-center justify-center gap-3 sm:gap-4 md:gap-6 mt-6 sm:mt-8 text-xs sm:text-sm"
                        style="color: var(--color-muted);">
                        <div class="flex items-center gap-1.5 sm:gap-2">
                            <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4 shrink-0" viewBox="0 0 16 16" fill="none">
                                <circle cx="8" cy="8" r="7" stroke="var(--color-accent-green)" stroke-width="1.5" />
                                <path d="M5 8l2 2 4-4" stroke="var(--color-accent-green)" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg><span>Cycle Detection</span>
                        </div>
                        <div class="flex items-center gap-1.5 sm:gap-2">
                            <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4 shrink-0" viewBox="0 0 16 16" fill="none">
                                <circle cx="8" cy="8" r="7" stroke="var(--color-accent-green)" stroke-width="1.5" />
                                <path d="M5 8l2 2 4-4" stroke="var(--color-accent-green)" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg><span>Smurfing Analysis</span>
                        </div>
                        <div class="flex items-center gap-1.5 sm:gap-2">
                            <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4 shrink-0" viewBox="0 0 16 16" fill="none">
                                <circle cx="8" cy="8" r="7" stroke="var(--color-accent-green)" stroke-width="1.5" />
                                <path d="M5 8l2 2 4-4" stroke="var(--color-accent-green)" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg><span>Shell Networks</span>
                        </div>
                        <div class="flex items-center gap-1.5 sm:gap-2">
                            <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4 shrink-0" viewBox="0 0 16 16" fill="none">
                                <circle cx="8" cy="8" r="7" stroke="var(--color-accent-green)" stroke-width="1.5" />
                                <path d="M5 8l2 2 4-4" stroke="var(--color-accent-green)" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg><span>Risk Scoring</span>
                        </div>
                    </div>
                </div>

                <!-- File Upload -->
                <div class="max-w-xl mx-auto px-2 sm:px-0 slide-up stagger-2 w-full">
                    <div id="error-banner" class="mb-4 p-3 rounded-lg text-xs sm:text-sm font-medium fade-in hidden"
                        style="background: rgba(220,38,38,0.08); color: var(--color-danger); border: 1px solid var(--color-danger);">
                    </div>
                    <div id="drop-zone" class="card p-5 sm:p-8 text-center cursor-pointer transition-all duration-200"
                        style="border-style: dashed; border-width: 2px; border-color: var(--color-border);">
                        <input type="file" id="file-input" accept=".csv" class="hidden">
                        <div class="w-12 h-12 sm:w-14 sm:h-14 mx-auto mb-3 sm:mb-4 rounded-full flex items-center justify-center transition-colors duration-300"
                            style="background: rgba(132,147,74,0.1);">
                            <svg class="w-6 h-6 sm:w-7 sm:h-7" viewBox="0 0 24 24" fill="none"
                                stroke="var(--color-accent-green)" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" />
                                <polyline points="17 8 12 3 7 8" />
                                <line x1="12" y1="3" x2="12" y2="15" />
                            </svg>
                        </div>
                        <div id="drop-zone-text">
                            <p class="font-semibold text-sm sm:text-base mb-1" style="color: var(--color-text-main);">
                                Drop your CSV file here</p>
                            <p class="text-xs sm:text-sm px-2" style="color: var(--color-text-muted);">or click to
                                browse. Required: transaction_id, sender_id, receiver_id, amount, timestamp</p>
                        </div>
                        <div id="drop-zone-file" class="hidden flex items-center gap-3 justify-center flex-wrap">
                            <div class="w-9 h-9 sm:w-10 sm:h-10 rounded-lg flex items-center justify-center text-white text-xs font-bold shrink-0"
                                style="background: var(--color-accent-green);">CSV</div>
                            <div class="text-left min-w-0">
                                <p id="file-name" class="font-semibold text-xs sm:text-sm truncate"
                                    style="color: var(--color-text-main);"></p>
                                <p id="file-size" class="text-xs" style="color: var(--color-text-muted);"></p>
                            </div>
                            <button id="remove-file-btn"
                                class="ml-1 sm:ml-2 text-xs underline shrink-0 hover:text-red-500 transition-colors"
                                style="color: var(--color-text-muted);">Remove</button>
                        </div>
                    </div>
                    <button id="analyze-btn"
                        class="btn-hover w-full mt-3 sm:mt-4 py-2.5 sm:py-3 rounded-xl text-white font-semibold text-sm sm:text-base fade-in shadow-md transition-all duration-300 hidden"
                        style="background: var(--color-accent-green);">
                        üîç Analyze Transactions
                    </button>
                </div>
            </div>

            <!-- LOADING STATE -->
            <div id="state-loading" class="fade-in w-full flex-1 flex items-center justify-center hidden">
                <div class="flex flex-col items-center justify-center py-12 sm:py-16 md:py-24 px-4 fade-in">
                    <div class="relative mb-6 sm:mb-8">
                        <div class="loader-ring"></div>
                        <div class="absolute inset-0 flex items-center justify-center text-xl sm:text-2xl"
                            id="loading-icon">üîó</div>
                    </div>
                    <h2 class="text-lg sm:text-xl font-bold mb-2" style="color: var(--color-deep-brown);">Analyzing
                        Transactions‚Ä¶</h2>
                    <p id="loading-stage"
                        class="text-xs sm:text-sm font-medium mb-4 sm:mb-6 transition-all duration-300 text-center"
                        style="color: var(--color-olive);">Building Transaction Graph</p>
                    <div class="w-64 sm:w-80 h-2 rounded-full overflow-hidden" style="background: var(--color-border);">
                        <div id="loading-bar" class="h-full rounded-full transition-all duration-700 ease-out"
                            style="width: 0%; background: var(--color-accent-green);"></div>
                    </div>
                    <div id="loading-stages"
                        class="mt-6 sm:mt-8 space-y-1.5 sm:space-y-2 text-xs sm:text-sm w-full max-w-xs"></div>
                </div>
            </div>

            <!-- RESULTS STATE -->
            <div id="state-results" class="fade-in w-full hidden">
                <!-- Dashboard content will be injected here -->
            </div>

        </main>

        <!-- Footer -->
        <footer class="w-full text-center py-4 sm:py-6 text-xs sm:text-sm px-4 shrink-0 transition-colors duration-300"
            style="color: var(--color-text-muted);">
            MullBar ¬© 2026 ‚Äî Money Muling Risk Intelligence Platform
        </footer>
    </div>

    <script src="https://unpkg.com/cytoscape@3.28.1/dist/cytoscape.min.js"></script>
    <script src="/static/js/main.js"></script>
</body>

</html>